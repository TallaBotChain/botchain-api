class DeveloperRecord < ApplicationRecord
  has_many :bots
  has_many :developers
  has_many :developer_record_transactions, foreign_key: 'eth_address', primary_key: 'eth_address'


  before_save :save_hashed_identifier

  def save_hashed_identifier
    self.hashed_identifier = generate_hashed_identifier
  end

  def generate_hashed_identifier
    new_attributes = self.attributes
    new_attributes.delete('id')
    new_attributes.delete('created_at')
    new_attributes.delete('updated_at')
    new_attributes.delete('hashed_identifier')
    new_attributes.delete('approved')
    Digest::SHA256.hexdigest(new_attributes.to_json)
  end
end

class DeveloperRecordTransaction < EthereumTransaction; end
